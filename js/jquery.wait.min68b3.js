(function(b){var a="waitForImages";b.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"]};b.expr[":"].uncached=function(d){if(!b(d).is('img[src!=""]')){return false}var c=new Image();c.src=d.src;return !c.complete};b.fn.waitForImages=function(f,d,e){var g=0;var c=0;if(b.isPlainObject(arguments[0])){e=arguments[0].waitForAll;d=arguments[0].each;f=arguments[0].finished}f=f||b.noop;d=d||b.noop;e=!!e;if(!b.isFunction(f)||!b.isFunction(d)){throw new TypeError("An invalid callback was supplied.")}return this.each(function(){var j=b(this);var k=[];var h=b.waitForImages.hasImageProperties||[];var i=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(e){j.find("*").addBack().each(function(){var l=b(this);if(l.is("img:uncached")){k.push({src:l.attr("src"),element:l[0]})}b.each(h,function(o,p){var m=l.css(p);var n;if(!m){return true}while(n=i.exec(m)){k.push({src:n[2],element:l[0]})}})})}else{j.find("img:uncached").each(function(){k.push({src:this.src,element:this})})}g=k.length;c=0;if(g===0){f.call(j[0])}b.each(k,function(m,l){var n=new Image();b(n).on("load."+a+" error."+a,function(o){c++;d.call(l.element,c,g,o.type=="load");if(c==g){f.call(j[0]);return false}});n.src=l.src})})}}(jQuery));